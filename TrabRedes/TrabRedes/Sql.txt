 DROP DATABASE TRABREDE;
CREATE DATABASE TRABREDE;

USE TRABREDE;

-- DROP TABLE USUARIO;
CREATE TABLE USUARIO (
  COD_USUARIO int AUTO_INCREMENT NOT NULL,
  NOM_USUARIO varchar(255) NOT NULL,
  NICK_USUARIO varchar(55) NOT NULL,  
  PRIMARY KEY (COD_USUARIO)
);

-- DROP TABLE medico;
CREATE TABLE MEDICO (
    COD_MEDICO int NOT NULL,
    NOM_MEDICO varchar(255) NOT NULL,
    EMAIL varchar(255),
    FK_MEDICO INT ,    
    PRIMARY KEY (COD_MEDICO),
    FOREIGN KEY (FK_MEDICO) REFERENCES USUARIO(COD_USUARIO)
);

-- DROP TABLE TIPO_SANGUE;
CREATE TABLE TIPO_SANGUE
(
    COD_TIPO_SANGUE  INT AUTO_INCREMENT NOT NULL,
    DSC_TIPO_SANGUE VARCHAR(50) NOT NULL,
    PRIMARY KEY(COD_TIPO_SANGUE)
);

-- DROP TABLE TIPO_CONVENIO;
CREATE TABLE TIPO_CONVENIO
(
    COD_TIPO_CONVENIO  INT AUTO_INCREMENT NOT NULL,
    DSC_TIPO_CONVENIO VARCHAR(50) NOT NULL,
    PRIMARY KEY(COD_TIPO_CONVENIO)
);

-- DROP TABLE PACIENTE;
CREATE TABLE PACIENTE(
    COD_PACIENTE INT AUTO_INCREMENT NOT NULL,
    NOM_PACIENTE VARCHAR(255) NOT NULL,    
    EMAIL VARCHAR(255) NOT NULL,
    FK_TIPO_SANGUE INT,
    FK_TIPO_CONVENIO INT,
    PRIMARY KEY (COD_PACIENTE),
    FOREIGN KEY (FK_TIPO_SANGUE) REFERENCES TIPO_SANGUE(COD_TIPO_SANGUE),
    FOREIGN KEY (FK_TIPO_CONVENIO) REFERENCES TIPO_CONVENIO(COD_TIPO_CONVENIO) 
);
