DROP DATABASE TRABREDE;
CREATE DATABASE TRABREDE;

USE TRABREDE;

-- DROP TABLE USUARIO;
CREATE TABLE USUARIO (
  COD_USUARIO int AUTO_INCREMENT ,
  NOM_USUARIO varchar(255) NOT NULL,
  NICK_USUARIO varchar(55) NOT NULL,  
  DSC_SENHA VARCHAR(55) NOT NULL,
  PRIMARY KEY (COD_USUARIO)
);

-- DROP TABLE medico;
CREATE TABLE MEDICO (
    COD_MEDICO int AUTO_INCREMENT,
    NOM_MEDICO varchar(255) NOT NULL,
    EMAIL varchar(255),
    COD_USUARIO INT ,    
    PRIMARY KEY (COD_MEDICO),
    FOREIGN KEY (COD_USUARIO) REFERENCES USUARIO(COD_USUARIO)
);

-- DROP TABLE TIPO_SANGUE;
CREATE TABLE TIPO_SANGUE
(
    COD_TIPO_SANGUE  INT AUTO_INCREMENT,
    DSC_TIPO_SANGUE VARCHAR(50) NOT NULL,
    IND_TIPO_SANGUE BIT, 
    PRIMARY KEY(COD_TIPO_SANGUE)
);

-- DROP TABLE TIPO_CONVENIO;
CREATE TABLE TIPO_CONVENIO
(
    COD_TIPO_CONVENIO  INT AUTO_INCREMENT ,
    DSC_TIPO_CONVENIO VARCHAR(50) NOT NULL,
    PRIMARY KEY(COD_TIPO_CONVENIO)
);

-- DROP TABLE PACIENTE;
CREATE TABLE PACIENTE(
    COD_PACIENTE INT AUTO_INCREMENT ,
    NOM_PACIENTE VARCHAR(255) NOT NULL,    
    EMAIL VARCHAR(255) NOT NULL,
    COD_TIPO_SANGUE INT,
    COD_TIPO_CONVENIO INT,
    PRIMARY KEY (COD_PACIENTE),
    FOREIGN KEY (COD_TIPO_SANGUE) REFERENCES TIPO_SANGUE(COD_TIPO_SANGUE),
    FOREIGN KEY (COD_TIPO_CONVENIO) REFERENCES TIPO_CONVENIO(COD_TIPO_CONVENIO) 
);

INSERT INTO tipo_sangue(DSC_TIPO_SANGUE,IND_TIPO_SANGUE) VALUES ( "A", 0);
INSERT INTO tipo_sangue(DSC_TIPO_SANGUE,IND_TIPO_SANGUE) VALUES ( "A", 1);
INSERT INTO tipo_sangue(DSC_TIPO_SANGUE,IND_TIPO_SANGUE) VALUES ( "B", 0);
INSERT INTO tipo_sangue(DSC_TIPO_SANGUE,IND_TIPO_SANGUE) VALUES ( "B", 1);
INSERT INTO tipo_sangue(DSC_TIPO_SANGUE,IND_TIPO_SANGUE) VALUES ( "AB", 0);
INSERT INTO tipo_sangue(DSC_TIPO_SANGUE,IND_TIPO_SANGUE) VALUES ( "AB", 1);
INSERT INTO tipo_sangue(DSC_TIPO_SANGUE,IND_TIPO_SANGUE) VALUES ( "O", 0);
INSERT INTO tipo_sangue(DSC_TIPO_SANGUE,IND_TIPO_SANGUE) VALUES ( "O", 1);

SELECT * FROM tipo_sangue;

INSERT INTO tipo_convenio(DSC_TIPO_CONVENIO) VALUES ("UNIMED");
INSERT INTO tipo_convenio(DSC_TIPO_CONVENIO) VALUES ("PARTICULAR");
INSERT INTO tipo_convenio(DSC_TIPO_CONVENIO) VALUES ("SANTANDER MED");

SELECT * FROM tipo_convenio;

INSERT INTO usuario(NICK_USUARIO,NOM_USUARIO,DSC_SENHA) VALUES ("BATMAN","BRUCE WAYNE","batsenha1");
INSERT INTO usuario(NICK_USUARIO,NOM_USUARIO,DSC_SENHA) VALUES ("admin","ADMINISTRADOR","admin123");
INSERT INTO usuario(NICK_USUARIO,NOM_USUARIO,DSC_SENHA) VALUES ("derick","derick","derick");

SELECT * FROM usuario;

insert into medico(NOM_MEDICO,EMAIL,COD_USUARIO) VALUES ("SR. BRUCE", "bruce_batman@hotmail.com", 1);
insert into medico(NOM_MEDICO,EMAIL,COD_USUARIO) VALUES ("ADMIN", "windows@hotmail.com", 2);
insert into medico(NOM_MEDICO,EMAIL,COD_USUARIO) VALUES ("DERICK", "derick@hotmail.com", 3);

SELECT * FROM medico;


insert into paciente(NOM_PACIENTE,EMAIL,COD_TIPO_CONVENIO,COD_TIPO_SANGUE) VALUES ("BELIX","belix@gmail.com", 1 , 1);
insert into paciente(NOM_PACIENTE,EMAIL,COD_TIPO_CONVENIO,COD_TIPO_SANGUE) VALUES ("AMANDA","amanda@gmail.com", 2 , 5);
insert into paciente(NOM_PACIENTE,EMAIL,COD_TIPO_CONVENIO,COD_TIPO_SANGUE) VALUES ("EDUARDO","eduardo@gmail.com", 3 , 6);
insert into paciente(NOM_PACIENTE,EMAIL,COD_TIPO_CONVENIO,COD_TIPO_SANGUE) VALUES ("GALIO","galio@gmail.com", 2 , 4);

SELECT * FROM paciente;